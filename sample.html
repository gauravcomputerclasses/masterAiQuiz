<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Simple Quiz</title>
    <style>
        body {
            font-family: Arial;
            padding: 20px;
        }

        #quiz-container {
            margin-bottom: 20px;
        }
    </style>
</head>

<body>

    <h2>Simple Quiz</h2>

    <label>Name: <input type="text" id="username" required></label>
    <div id="quiz-container">
        <p>What is 2 + 2?</p>
        <button onclick="submitAnswer(4)">4</button>
        <button onclick="submitAnswer(5)">5</button>
    </div>

    <p id="result"></p>
    <script>
        let startTime = Date.now();
        let answered = false;

        function submitAnswer(answer) {
            if (answered) return;
            answered = true;

            const user = document.getElementById("username").value.trim();
            if (!user) {
                alert("Please enter your name.");
                return;
            }

            const score = (answer === 4) ? 1 : 0;
            const timeTaken = Math.floor((Date.now() - startTime) / 1000);

            document.getElementById("result").innerText =
                `Score: ${score}, Time: ${timeTaken}s. Submitting...`;

            sendQuizResult(user, score, timeTaken);
        }

        function sendQuizResult(name, score, timeTaken) {
            const scriptURL = "https://script.google.com/macros/s/AKfycbyB43fjUiG3UoBzmInTfGyXr-gF1V229ip-GUdLZx3uExblY08IWQzOPOyURsHVtziooQ/exec";  // <-- Replace this
            const proxyURL = "https://corsproxy.io/?" + encodeURIComponent(scriptURL);

            const data = `name=${encodeURIComponent(name)}&score=${score}&time=${timeTaken}`;

            fetch(proxyURL, {
                method: "POST",
                headers: {
                    "Content-Type": "application/x-www-form-urlencoded"
                },
                body: data
            })
                .then(response => response.text())
                .then(result => {
                    document.getElementById("result").innerText += " ✅ Submitted!";
                    console.log("Submitted:", result);
                })
                .catch(error => {
                    document.getElementById("result").innerText += " ❌ Failed to submit.";
                    console.error("Submission error:", error);
                });
        }
    </script>
</body>

</html>